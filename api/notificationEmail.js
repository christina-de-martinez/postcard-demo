const html = `<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html dir="ltr" lang="en">
  <head>
    <meta content="text/html; charset=UTF-8" http-equiv="Content-Type" />
    <meta name="x-apple-disable-message-reformatting" />
    <style>
      .space-y-12px > :not([hidden]) ~ :not([hidden]){margin-top:calc(12px * calc(1 - 0)) !important;margin-bottom:calc(12px * 0) !important}
    </style>
  </head>
  <body
    style='background-color:rgb(243,244,246);font-family:ui-sans-serif, system-ui, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";padding-top:40px;padding-bottom:40px'>
    <!--$-->
    <div
      style="display:none;overflow:hidden;line-height:1px;opacity:0;max-height:0;max-width:0"
      data-skip-in-text="true">
      New digital postcard submitted from %NAME%
    </div>
    <table
      align="center"
      width="100%"
      border="0"
      cellpadding="0"
      cellspacing="0"
      role="presentation"
      style="background-color:rgb(255,255,255);border-radius:8px;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), 0 0 #0000;max-width:600px;margin-left:auto;margin-right:auto;padding:32px">
      <tbody>
        <tr style="width:100%">
          <td>
            <table
              align="center"
              width="100%"
              border="0"
              cellpadding="0"
              cellspacing="0"
              role="presentation"
              style="margin-bottom:32px">
              <tbody>
                <tr>
                  <td>
                    <h1
                      style="font-size:24px;font-weight:700;color:rgb(17,24,39);margin:0px;margin-bottom:8px">
                      ðŸ“® New Digital Postcard Received!
                    </h1>
                    <p
                      style="color:rgb(75,85,99);font-size:16px;margin:0px;line-height:24px;margin-top:0px;margin-bottom:0px;margin-left:0px;margin-right:0px">
                      Someone just sent you a digital postcard through
                      snailmail.dev.
                    </p>
                  </td>
                </tr>
              </tbody>
            </table>
            <table
              align="center"
              width="100%"
              border="0"
              cellpadding="0"
              cellspacing="0"
              role="presentation"
              style="margin-bottom:32px">
              <tbody>
                <tr>
                  <td>
                    <div
                      class="from-blue-50 to-indigo-100"
                      style="background-image:linear-gradient(to bottom right, var(--tw-gradient-stops));border-width:2px;border-style:solid;border-color:rgb(229,231,235);border-radius:12px;padding:24px;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), 0 0 #0000">
                      <table
                        align="center"
                        width="100%"
                        border="0"
                        cellpadding="0"
                        cellspacing="0"
                        role="presentation">
                        <tbody style="width:100%">
                          <tr style="width:100%">
                            <td
                              data-id="__react-email-column"
                              style="width:60%;padding-right:24px">
                              <p
                                style="font-size:18px;font-weight:500;color:rgb(17,24,39);margin-bottom:0px;margin:0px;line-height:24px;margin-top:0px;margin-left:0px;margin-right:0px">
                                Message:
                              </p>
                              <div
                                style="background-color:rgb(255,255,255);padding:16px;border-radius:8px;border-width:1px;border-style:solid;border-color:rgb(229,231,235);min-height:120px">
                                <p
                                  style="font-size:16px;color:rgb(31,41,55);line-height:1.625;margin:0px;margin-top:0px;margin-bottom:0px;margin-left:0px;margin-right:0px">
                                  %MESSAGE%
                                </p>
                              </div>
                            </td>
                            <td
                              data-id="__react-email-column"
                              style="width:40%;padding-left:24px;border-left-width:1px;border-style:solid;border-color:rgb(209,213,219)">
                              <p
                                style="font-size:18px;font-weight:500;color:rgb(17,24,39);margin-bottom:0px;margin:0px;line-height:24px;margin-top:0px;margin-left:0px;margin-right:0px">
                                From:
                              </p>
                              <div class="space-y-12px">
                                <div>
                                  <p
                                    style="font-size:14px;color:rgb(75,85,99);margin-bottom:0px;margin:0px;font-weight:500;line-height:24px;margin-top:0px;margin-left:0px;margin-right:0px">
                                    Name:
                                  </p>
                                  <p
                                    style="font-size:16px;color:rgb(17,24,39);margin:0px;line-height:24px;margin-top:0px;margin-bottom:0px;margin-left:0px;margin-right:0px">
                                    %NAME%
                                  </p>
                                </div>
                                <div>
                                  <p
                                    style="font-size:14px;color:rgb(75,85,99);margin-bottom:0px;margin:0px;font-weight:500;line-height:24px;margin-top:0px;margin-left:0px;margin-right:0px">
                                    Location:
                                  </p>
                                  <p
                                    style="font-size:16px;color:rgb(17,24,39);margin:0px;line-height:24px;margin-top:0px;margin-bottom:0px;margin-left:0px;margin-right:0px">
                                    %LOCATION%
                                  </p>
                                </div>
                              </div>
                            </td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                  </td>
                </tr>
              </tbody>
            </table>
            <table
              align="center"
              width="100%"
              border="0"
              cellpadding="0"
              cellspacing="0"
              role="presentation"
              style="background-color:rgb(249,250,251);padding:20px;border-radius:8px;margin-bottom:32px">
              <tbody>
                <tr>
                  <td>
                    <p
                      style="font-size:14px;color:rgb(75,85,99);margin:0px;margin-bottom:8px;line-height:24px;margin-top:0px;margin-left:0px;margin-right:0px">
                      <strong>Submitted:</strong>
                      <!-- -->%TIMESTAMP%
                    </p>
                    <p
                      style="font-size:14px;color:rgb(75,85,99);margin:0px;line-height:24px;margin-top:0px;margin-bottom:0px;margin-left:0px;margin-right:0px">
                      <strong>App:</strong> snailmail.dev
                    </p>
                  </td>
                </tr>
              </tbody>
            </table>
            <table
              align="center"
              width="100%"
              border="0"
              cellpadding="0"
              cellspacing="0"
              role="presentation"
              style="border-top-width:1px;border-style:solid;border-color:rgb(229,231,235);padding-top:24px">
              <tbody>
                <tr>
                  <td>
                    <p
                      style="font-size:12px;color:rgb(107,114,128);text-align:center;margin:0px;margin-bottom:8px;line-height:24px;margin-top:0px;margin-left:0px;margin-right:0px">
                      This notification was sent from snailmail.dev
                    </p>
                    <p
                      style="font-size:12px;color:rgb(107,114,128);text-align:center;margin:0px;line-height:24px;margin-top:0px;margin-bottom:0px;margin-left:0px;margin-right:0px">
                      hi@christinacodes.dev â€¢ Woodland, US â€¢ Â© 2025
                    </p>
                  </td>
                </tr>
              </tbody>
            </table>
          </td>
        </tr>
      </tbody>
    </table>
    <!--7--><!--/$-->
  </body>
</html>
`;

const plainText = `
ðŸ“® NEW DIGITAL POSTCARD RECEIVED!

Someone just sent you a digital postcard through snailmail.dev.

Message:
%MESSAGE%

From:
Name: %NAME%
Location: %LOCATION%

Submitted: %TIMESTAMP%

This notification was sent from snailmail.dev

hi@christinacodes.dev â€¢ California, US â€¢ Â© 2025`;

const buildEmail = ({ userName, message, location }) => {
    const replacements = {
        "%NAME%": userName,
        "%MESSAGE%": message,
        "%LOCATION%": location,
        "%TIMESTAMP%": new Date().toLocaleString("en-us", {
            timeZone: "America/Los_Angeles",
        }),
    };

    const plainTextEmail = plainText.replace(
        /%NAME%|%MESSAGE%|%LOCATION%|%TIMESTAMP%/g,
        (match) => {
            return replacements[match] || match;
        }
    );

    const htmlEmail = html.replace(
        /%NAME%|%MESSAGE%|%LOCATION%|%TIMESTAMP%/g,
        (match) => {
            return replacements[match] || match;
        }
    );

    return { plainTextEmail, htmlEmail };
};

module.exports = { buildEmail };
